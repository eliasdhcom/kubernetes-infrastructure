![logo](https://eliasdh.com/assets/media/images/logo-github.png)
# ğŸ’™ğŸ¤Setup OSğŸ¤ğŸ’™

## ğŸ“˜Table of Contents

1. [ğŸ“˜Table of Contents](#ğŸ“˜table-of-contents)
2. [ğŸ––Introduction](#ğŸ––introduction)
3. [âœ¨Steps](#âœ¨steps)
    1. [ğŸ‘‰Step 1: Install the necessary software packages](#ğŸ‘‰step-1-install-the-necessary-software-packages)
    2. [ğŸ‘‰Step 2: Set time zone](#ğŸ‘‰step-2-set-time-zone)
    3. [ğŸ‘‰Step 3: Set the hostname of the servers](#ğŸ‘‰step-3-set-the-hostname-of-the-servers)
    4. [ğŸ‘‰Step 4: Set logging welcome message](#ğŸ‘‰step-4-set-logging-welcome-message)
    5. [ğŸ‘‰Step 5: Disable cloud-init on the servers](#ğŸ‘‰step-5-disable-cloud-init-on-the-servers)
    6. [ğŸ‘‰Step 6: Configure the network interfaces of the servers](#ğŸ‘‰step-6-configure-the-network-interfaces-of-the-servers)
    7. [ğŸ‘‰Step 7: Disable IPv6 on the servers](#ğŸ‘‰step-7-disable-ipv6-on-the-servers)
    8. [ğŸ‘‰Step 8: Add the hostnames to the hosts file](#ğŸ‘‰step-8-add-the-hostnames-to-the-hosts-file)
    9. [ğŸ‘‰Step 9: Apply the network configuration](#ğŸ‘‰step-9-apply-the-network-configuration)
    10. [ğŸ‘‰Step 10: Reboot the servers](#ğŸ‘‰step-10-reboot-the-servers)
4. [ğŸ”—Links](#ğŸ”—links)

---

## ğŸ––Introduction

This document provides a step-by-step guide to setting up the `operating system` on the servers (nodes) in the supercluster. The steps outlined in this document are essential for ensuring the proper functioning of the servers (nodes) and the supercluster.

## âœ¨Steps

### ğŸ‘‰Step 1: Install the necessary software packages

```bash
sudo apt-get update -y && sudo apt-get upgrade -y
```

### ğŸ‘‰Step 2: Set time zone

```bash
sudo timedatectl set-timezone Europe/Brussels
```

### ğŸ‘‰Step 3: Set the hostname of the servers

```bash
sudo hostnamectl set-hostname node00 # e.g. node01
```

### ğŸ‘‰Step 4: Set logging welcome message

```bash
sudo bash -c 'cat <<EOF > /etc/motd
??????????????????????????????????????????JJJJJJJJJJJJJJJJ??????????????????????????????????????????
??????????????????????????????????JJJJJ???77!!!~~~~~~!!77???JJJJ????????????????????????????????????
??????????????????????????????JJJ??7~^::..               ..:^^~7??JJJ???????????????????????????????
???????????????????????????JJJ7!^:                              .:^!7JJJ????????????????????????????
????????????????????????JJ?7~:                                       :~7?J??????????????????????????
??????????????????????JJ?~:                                             .~?JJ???????????????????????
????????????????????J?!:.                                                 .~?JJ?????????????????????
??????????????????JJ7:                                                       ^7J????????????????????
?????????????????J?^                     ..:^~~~~~~~~^::.                      ~?J??????????????????
????????????????J!.                  .:~7???JJJJJJJJJJJ??7!~:.                  .7J?????????????????
??????????????J?^                 :^!?JJJ????????????????JJJJ?!^.                 ~J????????????????
?????????????J?:                ^7?JJ?????????????????????????JJ?~.                ~J???????????????
????????????J?:               :7JJ????????JJJ????????JJJJ????????J?!.               ~J??????????????
????????????J^              .~?J????????J?7~:.......:^~!7??????????J?^               ~J?????????????
???????????J!               7J????????J?~.              .^7??????????J~               7J????????????
??????????J?.              !J????????J7.             .^!???????????JJJ?.              :?????????????
??????????J~              ^J????????J!            :~7?JJ???????JJJ?7~:                 ?J???????????
???????????.              7J???????J7         .^~7?JJ???????JJ?7~:.                .:~7?????????????
?????????J7              .????????J?.      .^!?JJJ??????JJJ?!~:                 :~!?JJJ?????????????
???????????.             .????????J^    :~7?JJ???????JJ?7~:.                .^!7?JJ?????????????????
???????????.             .?????????..:!??JJ??????JJJ?!^.                .^!7?JJJ????????????????????
??????????J^              7J?????????JJJ?????JJJ?7~:.               .:~7?JJJ???????JJ???????????????
??????????J!              7J??????????????JJ?7!^.               .:~7?JJJ???????JJJ?7~::?????????????
????????????.           :!J???????????????7^:                :~!?JJJ????????JJ??!^.   :?????????????
???????????J^       .^!??J?????????????J!.               :~!??JJ????????JJJ?7~:       7J????????????
???????????J7   .:~7?JJJ??????JJJ????????7~:.        .^!??JJJ???????JJJ?7~:.         :J?????????????
?????????????!!!?JJJ???????JJJ?77?JJJ????JJJ?77777777?JJJ???????JJJ?7~:.             7J?????????????
?????????????JJJ????????JJ?7~:.  .:!?JJJ?????JJJJJJJJ??????JJJ??7~:.                ~J??????????????
?????????????????????JJ?7~:          :~7?JJJJ????????JJJJJ?7!^:.                   ^J???????????????
???????????????????J?7~.                .:~7?????????77~^:.                       ~?????????????????
??????????????????J!.                        .::::::.                           :7J?????????????????
????????????????????~.                                                        ^!?J??????????????????
????????????????????J?~.                                                   :~7JJ????????????????????
??????????????????????J?7^                                              .~7?JJ??????????????????????
????????????????????????JJ?~:                                        :~7?JJ?????????????????????????
??????????????????????????JJ?7~^.                                .^!7?JJ????????????????????????????
?????????????????????????????JJJ??7!~^::..                 ..:^!7?JJJ???????????????????????????????
?????????????????????????????????JJJJJJ???77!~~~~~~~!!!!!77??JJJJ???????????????????????????????????
??????????????????????????????????????????JJJJJJJJJJJJJJJJJ?????????????????????????????????????????
????????????????????????????????????????????????????????????????????????????????????????????????????
------------------------------
- Welcome to server [$(hostname)] -
------------------------------
EOF'
```

### ğŸ‘‰Step 5: Disable cloud-init on the servers

```bash
echo "network: {config: disabled}" | sudo tee /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg && sudo touch /etc/cloud/cloud-init.disabled
```

### ğŸ‘‰Step 6: Configure the network interfaces of the servers

```bash
sudo rm -rf /etc/netplan/50-cloud-init.yaml && sudo bash -c 'cat <<EOF > /etc/netplan/01-netcfg.yaml
network:
  version: 2
  ethernets:
    ens18:
      dhcp4: no
      dhcp6: no
      accept-ra: no
      addresses:
        - $1/24
      nameservers:
        addresses:
          - $2
          - 8.8.8.8
          - 1.1.1.1
      routes:
        - to: default
          via: $3
EOF
sudo netplan apply' && sudo bash script.sh 10.1.0.1 10.1.0.253 10.1.0.254 # Static IP, DNS IP, Gateway IP
```

### ğŸ‘‰Step 7: Disable IPv6 on the servers

```bash
echo -e "net.ipv6.conf.all.disable_ipv6 = 1\nnet.ipv6.conf.default.disable_ipv6 = 1\nnet.ipv6.conf.lo.disable_ipv6 = 1" | sudo tee /etc/sysctl.conf | sudo sysctl -p
```

### ğŸ‘‰Step 8: Add the hostnames to the hosts file

```bash
# Cluster 01
echo -e "127.0.0.1 localhost\n10.1.0.1 node01\n10.1.0.2 node02\n10.1.0.3 node03\n10.1.0.4 node04\n10.1.0.5 node05\n10.1.0.6 node06\n10.1.0.7 node07\n10.1.0.8 node08\n10.1.0.9 node09\n10.1.0.10 proxy01\n" | sudo tee /etc/hosts > /dev/null

# Cluster 02
echo -e "127.0.0.1 localhost\n10.2.0.1 node11\n10.2.0.2 node12\n10.2.0.3 node13\n10.2.0.4 node14\n10.2.0.5 node15\n10.2.0.6 node16\n10.2.0.7 node17\n10.2.0.8 node18\n10.2.0.9 node19\n10.2.0.10 proxy02\n" | sudo tee /etc/hosts > /dev/null

# Cluster 03
echo -e "127.0.0.1 localhost\n10.3.0.1 node21\n10.3.0.2 node22\n10.3.0.3 node23\n10.3.0.4 node24\n10.3.0.5 node25\n10.3.0.6 node26\n10.3.0.7 node27\n10.3.0.8 node28\n10.3.0.9 node29\n10.3.0.10 proxy03\n" | sudo tee /etc/hosts > /dev/null
```

### ğŸ‘‰Step 9: Apply the network configuration

```bash
sudo chmod 600 /etc/netplan/01-netcfg.yaml
sudo chown root:root /etc/netplan/01-netcfg.yaml
sudo netplan apply
```

### ğŸ‘‰Step 10: Reboot the servers

```bash
sudo reboot
```

## ğŸ”—Links
- ğŸ‘¯ Web hosting company [EliasDH.com](https://eliasdh.com).
- ğŸ“« How to reach us elias.dehondt@outlook.com